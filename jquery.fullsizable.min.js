/*
jQuery fullsizable plugin v1.2
  - take full available browser space to show images

(c) 2011 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var i,g,h,n,b,j,l,c,k,d,e,q,o,a,m,p,f;i=jQuery;h="#jquery-fullsizable";j="#fullsized_image_holder";f="fullsized_spinner";b=i('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');k=i('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>');l=[];n=0;q=null;m=function(){var s,r;s=l[n];if((r=s.ratio)!=null){r}else{s.ratio=(s.height/s.width).toFixed(2)}if(i(window).height()/s.ratio>i(window).width()){i(s).width(i(window).width());i(s).height(i(window).width()*s.ratio);return i(s).css("margin-top",(i(window).height()-i(s).height())/2)}else{i(s).height(i(window).height());i(s).width(i(window).height()/s.ratio);return i(s).css("margin-top",0)}};c=function(r){if(r.keyCode===27){g()}if(r.keyCode===37){a()}if(r.keyCode===39){return d()}};a=function(){if(n>0){return p(l[n-1],-1)}};d=function(){if(n<l.length-1){return p(l[n+1],1)}};p=function(s,r){if(r==null){r=1}n=s.index;i(s).hide();i(j).html(s);if(q.navigation){i("#fullsized_go_prev").toggle(n!==0);i("#fullsized_go_next").toggle(n!==l.length-1)}if(s.loaded!=null){i(j).removeClass(f);m();i(s).fadeIn("fast");return o(r)}else{i(j).addClass(f);s.onload=function(){m();i(this).fadeIn("slow",function(){return i(j).removeClass(f)});this.loaded=true;return o(r)};return s.src=s.buffer_src}};o=function(s){var r;if(s===1&&n<l.length-1){r=l[n+1]}else{if((s===-1||n===(l.length-1))&&n>0){r=l[n-1]}else{return}}r.onload=function(){return this.loaded=true};if(r.src===""){return r.src=r.buffer_src}};e=function(){i(document).bind("keydown",c);i(window).bind("resize",m);return i(h).hide().fadeIn(function(){if(q.detach_id!=null){i("#"+q.detach_id).css("display","none")}return m()})};g=function(){if(q.detach_id!=null){i("#"+q.detach_id).css("display","block")}i(h).fadeOut();i(j).removeClass(f);i(document).unbind("keydown",c);return i(window).unbind("resize",m)};i.fn.fullsizable=function(r){if(r==null){r={}}q=r;i("body").append(b);if(q.navigation){b.append(k);i("#fullsized_go_prev").click(function(s){s.preventDefault();s.stopPropagation();return a()});i("#fullsized_go_next").click(function(s){s.preventDefault();s.stopPropagation();return d()})}this.each(function(){var s;s=new Image;s.buffer_src=this.href;s.index=l.length;l.push(s);return i(this).click(function(t){t.preventDefault();p(s);return e()})});return i(h).click(g)}}).call(this);
