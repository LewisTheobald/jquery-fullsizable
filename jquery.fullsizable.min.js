/*
jQuery fullsizable plugin v1.1
  - take full available browser space to show images

(c) 2011 Matthias Schmidt <http://m-schmidt.eu/>

Example Usage:
  $('a.fullsizable').fullsizable();

Options:
  detach_id: optional id of an element that will be set to display: none after curtain loaded
*/
(function(){var b,h,d,c,i,k,e,j,f,g;b=jQuery;c=[];d=0;e=null;f=function(){var a;a=c[d];if(a.ratio==null)a.ratio=(a.height/a.width).toFixed(2);return b(window).height()/a.ratio>b(window).width()?(b(a).width(b(window).width()),b(a).height(b(window).width()*a.ratio),b(a).css("margin-top",(b(window).height()-b(a).height())/2)):(b(a).height(b(window).height()),b(a).width(b(window).height()/a.ratio),b(a).css("margin-top",0))};i=function(a){a.keyCode===27&&h();a.keyCode===37&&d>0&&g(c[d-1],-1);if(a.keyCode===
39&&d<c.length-1)return g(c[d+1],1)};g=function(a,c){c==null&&(c=1);d=a.index;b(a).hide();b("#fullsized_image_holder").html(a);return a.loaded!=null?(b("#fullsized_image_holder").removeClass("fullsized_spinner"),f(),b(a).fadeIn("fast"),j(c)):(b("#fullsized_image_holder").addClass("fullsized_spinner"),a.onload=function(){f();b(this).fadeIn("slow",function(){return b("#fullsized_image_holder").removeClass("fullsized_spinner")});this.loaded=!0;return j(c)},a.src=a.buffer_src)};j=function(a){if(a===1&&
d<c.length-1)a=c[d+1];else if((a===-1||d===c.length-1)&&d>0)a=c[d-1];else return;a.onload=function(){return this.loaded=!0};if(a.src==="")return a.src=a.buffer_src};k=function(){b(document).bind("keydown",i);b(window).bind("resize",f);return b("#fullsized_image_holder").hide().fadeIn(function(){e.detach_id!=null&&b("#"+e.detach_id).css("display","none");return f()})};h=function(){e.detach_id!=null&&b("#"+e.detach_id).css("display","block");b("#fullsized_image_holder").fadeOut();b("#fullsized_image_holder").removeClass("fullsized_spinner");
b(document).unbind("keydown",i);return b(window).unbind("resize",f)};b.fn.fullsizable=function(a){a==null&&(a={});e=a;b("body").append('<div id="fullsized_image_holder"></div>');this.each(function(){var a;a=new Image;a.buffer_src=this.href;a.index=c.length;c.push(a);return b(this).click(function(b){b.preventDefault();g(a);return k()})});return b("#fullsized_image_holder").click(h)}}).call(this);
