/*
jQuery fullsizable plugin v1.3
  - take full available browser space to show images

(c) 2011 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var a,h,d,j,c,k,l,r,m,n,e,o,p,f,q,g;a=jQuery;j=a('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');r=a('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>');q=null;c=[];d=0;e=null;f=function(){var b;b=c[d];if(b.ratio==null)b.ratio=(b.height/b.width).toFixed(2);return a(window).height()/b.ratio>a(window).width()?(a(b).width(a(window).width()),a(b).height(a(window).width()*b.ratio),a(b).css("margin-top",(a(window).height()-
a(b).height())/2)):(a(b).height(a(window).height()),a(b).width(a(window).height()/b.ratio),a(b).css("margin-top",0))};k=function(b){b.keyCode===27&&h();b.keyCode===37&&p();if(b.keyCode===39)return m()};p=function(){if(d>0)return g(c[d-1],-1)};m=function(){if(d<c.length-1)return g(c[d+1],1)};g=function(b,i){i==null&&(i=1);d=b.index;a("#fullsized_image_holder").hide();a("#fullsized_image_holder").html(b);e.navigation&&(a("#fullsized_go_prev").toggle(d!==0),a("#fullsized_go_next").toggle(d!==c.length-
1));return b.loaded!=null?(a("#jquery-fullsizable").removeClass("fullsized_spinner"),f(),a("#fullsized_image_holder").fadeIn("fast"),o(i)):(a("#jquery-fullsizable").addClass("fullsized_spinner"),b.onload=function(){f();a("#fullsized_image_holder").fadeIn("slow",function(){return a("#jquery-fullsizable").removeClass("fullsized_spinner")});this.loaded=!0;return o(i)},b.src=b.buffer_src)};o=function(b){if(b===1&&d<c.length-1)b=c[d+1];else if((b===-1||d===c.length-1)&&d>0)b=c[d-1];else return;b.onload=
function(){return this.loaded=!0};if(b.src==="")return b.src=b.buffer_src};n=function(b){a(window).bind("resize",f);g(b);return a("#jquery-fullsizable").hide().fadeIn(function(){e.detach_id!=null&&(a("#"+e.detach_id).css("display","none"),f());a("#jquery-fullsizable").bind("click",h);return a(document).bind("keydown",k)})};h=function(){e.detach_id!=null&&a("#"+e.detach_id).css("display","block");a("#jquery-fullsizable").unbind("click",h);a("#jquery-fullsizable").fadeOut();a("#jquery-fullsizable").removeClass("fullsized_spinner");
a(document).unbind("keydown",k);return a(window).unbind("resize",f)};l=function(){c.length=0;return(e.dynamic?a(e.dynamic):q).each(function(){var b;b=new Image;b.buffer_src=a(this).attr("href");b.index=c.length;c.push(b);if(e.openOnClick)return a(this).click(function(a){a.preventDefault();return n(b)})})};a.fn.fullsizable=function(b){b==null&&(b={});e=a.extend({detach_id:null,navigation:!1,openOnClick:!0,dynamic:null},b);a("body").append(j);e.navigation&&(j.append(r),a("#fullsized_go_prev").click(function(a){a.preventDefault();
a.stopPropagation();return p()}),a("#fullsized_go_next").click(function(a){a.preventDefault();a.stopPropagation();return m()}));q=this;e.dynamic||l();return this};a.fullsizableDynamic=function(b,c){c==null&&(c={});return a(b).fullsizable(a.extend(c,{dynamic:b}))};a.fullsizableOpen=function(b){var d,f,h,g;e.dynamic&&l();g=[];for(f=0,h=c.length;f<h;f++)d=c[f],g.push(d.buffer_src===a(b).attr("href")?n(d):void 0);return g}}).call(this);
