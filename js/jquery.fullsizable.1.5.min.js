/*
jQuery fullsizable plugin v1.5
  - take full available browser space to show images

(c) 2011-2012 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var b,h,t,i,c,u,e,l,m,j,n,d,o,p,g,q,k,r,s;b=jQuery;h=b('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');q=null;e=[];c=0;r=d=null;g=function(){var a;a=e[c];null==a.ratio&&(a.ratio=(a.height/a.width).toFixed(2));if(b(window).height()/a.ratio>b(window).width())return b(a).width(b(window).width()),b(a).height(b(window).width()*a.ratio),b(a).css("margin-top",(b(window).height()-b(a).height())/2);b(a).height(b(window).height());b(a).width(b(window).height()/a.ratio);
return b(a).css("margin-top",0)};l=function(a){27===a.keyCode&&i();37===a.keyCode&&p();if(39===a.keyCode)return j()};p=function(){if(0<c)return k(e[c-1],-1)};j=function(){if(c<e.length-1)return k(e[c+1],1)};k=function(a,f){null==f&&(f=1);c=a.index;b("#fullsized_image_holder").hide();b("#fullsized_image_holder").html(a);d.navigation&&(b("#fullsized_go_prev").toggle(0!==c),b("#fullsized_go_next").toggle(c!==e.length-1));if(null!=a.loaded)return b("#jquery-fullsizable").removeClass("fullsized_spinner"),
g(),b("#fullsized_image_holder").fadeIn("fast"),o(f);b("#jquery-fullsizable").addClass("fullsized_spinner");a.onload=function(){g();b("#fullsized_image_holder").fadeIn("slow",function(){return b("#jquery-fullsizable").removeClass("fullsized_spinner")});this.loaded=true;return o(f)};return a.src=a.buffer_src};o=function(a){if(1===a&&c<e.length-1)a=e[c+1];else if((-1===a||c===e.length-1)&&0<c)a=e[c-1];else return;a.onload=function(){return this.loaded=!0};if(""===a.src)return a.src=a.buffer_src};n=
function(a){b(window).bind("resize",g);k(a);return b("#jquery-fullsizable").hide().fadeIn(function(){null!=d.detach_id&&(r=b(window).scrollTop(),b("#"+d.detach_id).css("display","none"),g());"close"===d.clickBehaviour&&b("#jquery-fullsizable").bind("click",i);"next"===d.clickBehaviour&&b("#jquery-fullsizable").bind("click",j);return b(document).bind("keydown",l)})};i=function(){null!=d.detach_id&&(b("#"+d.detach_id).css("display","block"),b(window).scrollTop(r));"close"===d.clickBehaviour&&b("#jquery-fullsizable").unbind("click",
i);"next"===d.clickBehaviour&&b("#jquery-fullsizable").unbind("click",j);b("#jquery-fullsizable").fadeOut();t();b("#jquery-fullsizable").removeClass("fullsized_spinner");b(document).unbind("keydown",l);return b(window).unbind("resize",g)};m=function(){e.length=0;return(d.dynamic?b(d.dynamic):q).each(function(){var a;a=new Image;a.buffer_src=b(this).attr("href");a.index=e.length;e.push(a);if(d.openOnClick)return b(this).click(function(b){b.preventDefault();return n(a)})})};b.fn.fullsizable=function(a){d=
b.extend({detach_id:null,navigation:!1,openOnClick:!0,closeButton:!1,clickBehaviour:"close",allowFullscreen:!0,dynamic:null},a||{});b("body").append(h);d.navigation&&(h.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>'),b("#fullsized_go_prev").click(function(a){a.preventDefault();a.stopPropagation();return p()}),b("#fullsized_go_next").click(function(a){a.preventDefault();a.stopPropagation();return j()}));d.closeButton&&(h.append('<a id="fullsized_close" href="#close"></a>'),
b("#fullsized_close").click(function(a){a.preventDefault();a.stopPropagation();return i()}));d.allowFullscreen&&u()&&(h.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>'),b("#fullsized_fullscreen").click(function(a){a.preventDefault();a.stopPropagation();return s()}));q=this;d.dynamic||m();return this};b.fullsizableDynamic=function(a,f){null==f&&(f={});return b(a).fullsizable(b.extend(f,{dynamic:a}))};b.fullsizableOpen=function(a){var f,c,h,g;d.dynamic&&m();g=[];c=0;for(h=e.length;c<h;c++)f=
e[c],f.buffer_src===b(a).attr("href")?g.push(n(f)):g.push(void 0);return g};u=function(){var a;a=h.get(0);return a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen?!0:!1};t=function(){return s(!0)};s=function(a){var b;b=h.get(0);if(b.requestFullScreen)return document.fullScreen||a?document.exitFullScreen():b.requestFullScreen();if(b.webkitRequestFullScreen)return document.webkitIsFullScreen||a?document.webkitCancelFullScreen():b.webkitRequestFullScreen();if(b.mozRequestFullScreen)return document.mozFullScreen||
a?document.mozCancelFullScreen():b.mozRequestFullScreen()}}).call(this);
