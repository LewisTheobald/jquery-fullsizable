/*
jQuery fullsizable plugin v1.4
  - take full available browser space to show images

(c) 2011 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var a,h,s,d,i,e,l,m,t,g,n,c,o,p,f,q,j,r;a=jQuery;i=a('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');t=a('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>');s=a('<a id="fullsized_close" href="#close"></a>');q=null;e=[];d=0;r=c=null;f=function(){var b;b=e[d];null==b.ratio&&(b.ratio=(b.height/b.width).toFixed(2));if(a(window).height()/b.ratio>a(window).width())return a(b).width(a(window).width()),a(b).height(a(window).width()*
b.ratio),a(b).css("margin-top",(a(window).height()-a(b).height())/2);a(b).height(a(window).height());a(b).width(a(window).height()/b.ratio);return a(b).css("margin-top",0)};l=function(a){27===a.keyCode&&h();37===a.keyCode&&p();if(39===a.keyCode)return g()};p=function(){if(0<d)return j(e[d-1],-1)};g=function(){if(d<e.length-1)return j(e[d+1],1)};j=function(b,k){null==k&&(k=1);d=b.index;a("#fullsized_image_holder").hide();a("#fullsized_image_holder").html(b);c.navigation&&(a("#fullsized_go_prev").toggle(0!==
d),a("#fullsized_go_next").toggle(d!==e.length-1));if(null!=b.loaded)return a("#jquery-fullsizable").removeClass("fullsized_spinner"),f(),a("#fullsized_image_holder").fadeIn("fast"),o(k);a("#jquery-fullsizable").addClass("fullsized_spinner");b.onload=function(){f();a("#fullsized_image_holder").fadeIn("slow",function(){return a("#jquery-fullsizable").removeClass("fullsized_spinner")});this.loaded=true;return o(k)};return b.src=b.buffer_src};o=function(a){if(1===a&&d<e.length-1)a=e[d+1];else if((-1===
a||d===e.length-1)&&0<d)a=e[d-1];else return;a.onload=function(){return this.loaded=!0};if(""===a.src)return a.src=a.buffer_src};n=function(b){a(window).bind("resize",f);j(b);return a("#jquery-fullsizable").hide().fadeIn(function(){null!=c.detach_id&&(r=a(window).scrollTop(),a("#"+c.detach_id).css("display","none"),f());"close"===c.clickBehaviour&&a("#jquery-fullsizable").bind("click",h);"next"===c.clickBehaviour&&a("#jquery-fullsizable").bind("click",g);return a(document).bind("keydown",l)})};h=
function(){null!=c.detach_id&&(a("#"+c.detach_id).css("display","block"),a(window).scrollTop(r));"close"===c.clickBehaviour&&a("#jquery-fullsizable").unbind("click",h);"next"===c.clickBehaviour&&a("#jquery-fullsizable").unbind("click",g);a("#jquery-fullsizable").fadeOut();a("#jquery-fullsizable").removeClass("fullsized_spinner");a(document).unbind("keydown",l);return a(window).unbind("resize",f)};m=function(){e.length=0;return(c.dynamic?a(c.dynamic):q).each(function(){var b;b=new Image;b.buffer_src=
a(this).attr("href");b.index=e.length;e.push(b);if(c.openOnClick)return a(this).click(function(a){a.preventDefault();return n(b)})})};a.fn.fullsizable=function(b){c=a.extend({detach_id:null,navigation:!1,openOnClick:!0,closeButton:!1,clickBehaviour:"close",dynamic:null},b||{});a("body").append(i);c.navigation&&(i.append(t),a("#fullsized_go_prev").click(function(a){a.preventDefault();a.stopPropagation();return p()}),a("#fullsized_go_next").click(function(a){a.preventDefault();a.stopPropagation();return g()}));
c.closeButton&&(i.append(s),a("#fullsized_close").click(function(a){a.preventDefault();a.stopPropagation();return h()}));q=this;c.dynamic||m();return this};a.fullsizableDynamic=function(b,c){null==c&&(c={});return a(b).fullsizable(a.extend(c,{dynamic:b}))};a.fullsizableOpen=function(b){var d,f,h,g;c.dynamic&&m();g=[];f=0;for(h=e.length;f<h;f++)d=e[f],d.buffer_src===a(b).attr("href")?g.push(n(d)):g.push(void 0);return g}}).call(this);
